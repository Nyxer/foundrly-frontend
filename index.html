<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Foundrly — Build Your AI Startup</title>
  <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-purple: linear-gradient(to bottom right, #2d0059, #5e1aa2);
      --bg-gold: linear-gradient(to bottom right, #5f4200, #d4af37);
      --text-light: #ffffff;
      --text-dark: #1a1a1a;
      --accent-purple: #9b59b6;
      --accent-gold: #f1c40f;
      --accent-hover-purple: #732d91;
      --accent-hover-gold: #d1a70a;
    }
    body.theme-purple { background: var(--bg-purple); color: var(--text-light); }
    body.theme-gold { background: var(--bg-gold); color: var(--text-dark); }
    body {
      font-family: 'Fira Code', monospace;
      margin: 0;
      padding: 2rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      overflow: hidden;
      transition: background 0.5s ease, color 0.5s ease;
    }
    .background-codes {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0;
      overflow: hidden; pointer-events: none;
    }
    .code-float {
      position: absolute;
      color: rgba(255,255,255,0.3);
      font-size: 14px;
      white-space: pre;
      animation: floatCode 20s linear infinite;
    }
    @keyframes floatCode {
      0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
      25% { opacity: 1; }
      100% { transform: translateY(-120vh) rotate(360deg); opacity: 0; }
    }
    .title {
      font-size: 3rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
      text-align: center;
      animation: fadeIn 1s ease;
      z-index: 2;
    }
    body.theme-purple .title {
      background: linear-gradient(to right, #a770ef, #cf8bf3, #fdb99b);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    body.theme-gold .title {
      background: linear-gradient(to right, #d4af37, #eacb84);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    .slogan {
      font-size: 1.1rem;
      font-weight: 500;
      margin-bottom: 1.5rem;
      animation: fadeIn 1.2s ease-in-out;
      text-align: center;
      z-index: 2;
    }
    .container {
      max-width: 720px;
      width: 100%;
      background: rgba(255,255,255,0.06);
      border-radius: 16px;
      padding: 2rem;
      box-shadow: 0 0 16px rgba(0,0,0,0.5);
      z-index: 1;
      margin: 0 auto;
    }
    textarea {
      width: 100%;
      height: 140px;
      padding: 1rem;
      border-radius: 10px;
      background: #111;
      border: 1px solid #444;
      color: #00ff88;
      font-size: 0.95rem;
      font-family: 'Fira Code', monospace;
    }
    pre {
      background: #111;
      color: #00ffaa;
      padding: 1rem;
      border-radius: 8px;
      overflow-x: auto;
      white-space: pre-wrap;
      font-size: 0.95rem;
      font-family: 'Fira Code', monospace;
    }
    .questions-container input {
      width: 100%;
      margin-bottom: 1rem;
      padding: 0.75rem;
      border-radius: 6px;
      border: 1px solid #444;
      background: #222;
      color: #0f0;
    }
    button {
      margin-top: 1rem;
      padding: 0.75rem 1.5rem;
      font-size: 1rem;
      font-weight: bold;
      color: #fff;
      background-color: var(--accent-purple);
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    body.theme-gold button { background-color: var(--accent-gold); color: #1a1a1a; }
    body.theme-purple button:hover { background-color: var(--accent-hover-purple); }
    body.theme-gold button:hover { background-color: var(--accent-hover-gold); }
    #themeToggleBtn {
      position: fixed;
      bottom: 16px;
      right: 16px;
      padding: 0.5rem 1rem;
      border-radius: 6px;
      font-size: 0.9rem;
      z-index: 3;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body class="theme-purple">
  <div class="background-codes" id="backgroundCodes"></div>
  <div class="title">Foundrly</div>
  <div class="slogan">Your Cofounder Doesn’t Have to Be Human.</div>
  <div class="container">
    <textarea id="ideaInput" placeholder="e.g. An AI that generates Instagram captions for stylists..."></textarea>
    <button onclick="submitIdea()">Build It</button>
    <div id="loader">⏳ Generating...</div>
    <div id="questionsSection" class="questions-container" style="display: none;"></div>
    <button id="submitAnswersBtn" style="display:none" onclick="submitAnswers()">Submit Answers</button>
    <div class="response-area" id="responseArea"></div>
  </div>
  <button id="themeToggleBtn" onclick="toggleTheme()">Toggle Theme</button>
  <script>
    let followUpQuestions = [];
    function toggleTheme() {
      document.body.classList.toggle("theme-purple");
      document.body.classList.toggle("theme-gold");
    }
    async function submitIdea() {
      const idea = document.getElementById("ideaInput").value;
      const responseArea = document.getElementById("responseArea");
      const questionsSection = document.getElementById("questionsSection");
      const loader = document.getElementById("loader");
      document.getElementById("submitAnswersBtn").style.display = "none";
      questionsSection.innerHTML = "";
      questionsSection.style.display = "none";
      responseArea.innerHTML = "";
      loader.style.display = "block";
      try {
        const refineRes = await fetch("https://foundrly-backend-1.onrender.com/api/refine-idea", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ idea })
        });
        const refineData = await refineRes.json();
        loader.style.display = "none";
        if (refineData.status === "clarify") {
          followUpQuestions = refineData.questions;
          responseArea.innerHTML = "<h3>// Need more details:</h3>";
          followUpQuestions.forEach((q, i) => {
            const input = document.createElement("input");
            input.placeholder = q;
            input.id = `answer_${i}`;
            questionsSection.appendChild(input);
          });
          questionsSection.style.display = "block";
          document.getElementById("submitAnswersBtn").style.display = "inline-block";
        } else if (refineData.status === "ready") {
          generateCode(idea);
        } else {
          responseArea.innerHTML = "❗️ Unexpected response format.";
        }
      } catch (err) {
        console.error(err);
        loader.style.display = "none";
        responseArea.innerHTML = "⚠️ Something went wrong.";
      }
    }
    async function submitAnswers() {
      const answers = followUpQuestions.map((_, i) => document.getElementById(`answer_${i}`).value.trim());
      const refinedIdea = document.getElementById("ideaInput").value + ". " + answers.join(" ");
      generateCode(refinedIdea);
    }
    async function generateCode(idea) {
      const responseArea = document.getElementById("responseArea");
      const loader = document.getElementById("loader");
      loader.style.display = "block";
      responseArea.innerHTML = "";
      try {
        const genRes = await fetch("https://foundrly-backend-1.onrender.com/api/generate-code", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            idea,
            target_user: "creators",
            platform: "web app",
            features: ["text generation", "download"]
          })
        });
        const genData = await genRes.json();
        loader.style.display = "none";
        responseArea.innerHTML = `
          <h3>// Tool Summary</h3><pre>${genData.spec}</pre>
          <h3>// Generated Code</h3><pre>${genData.code}</pre>
          <h3>// Setup Instructions</h3><pre>${genData.instructions}</pre>`;
      } catch (err) {
        console.error(err);
        loader.style.display = "none";
        responseArea.innerHTML = "⚠️ Failed to generate tool.";
      }
    }
    window.onload = () => {
      const bg = document.getElementById("backgroundCodes");
      const snippets = [
        "An AI that generates ad headlines for coffee shops",
        "An AI that turns blog posts into carousels",
        "An AI that writes product descriptions for Etsy sellers",
        "An AI that creates captions for real estate listings",
        "An AI that drafts Instagram bios for creators",
        "An AI that generates tweet threads from news articles",
        "An AI that helps barbers schedule posts",
        "An AI that summarizes podcast episodes",
        "An AI that rewrites eBay product titles",
        "An AI that generates hashtags for fitness influencers",
        "An AI that writes reviews for local service businesses",
        "An AI that converts videos into blog summaries",
        "An AI that helps barbershop clients book appointments",
        "An AI that turns quotes into aesthetic Instagram posts",
        "An AI that designs portfolio website landing pages",
        "An AI that generates descriptions for YouTube shorts",
        "An AI that converts TikToks into email newsletters",
        "An AI that makes product page bullet points",
        "An AI that helps tattoo artists generate post ideas",
        "An AI that summarizes Zoom meetings into action items",
        "An AI that generates testimonials for Shopify stores",
        "An AI that makes Facebook ad copies for pet brands",
        "An AI that writes DMs to influencers to pitch collabs",
        "An AI that makes slogan ideas for skincare startups",
        "An AI that helps streetwear brands write product drops",
        "An AI that helps coaches turn sessions into email tips",
        "An AI that builds landing pages for food truck menus",
        "An AI that writes outreach emails for freelancers",
        "An AI that generates CTAs for SaaS homepages",
        "An AI that remixes customer reviews into ad copy"
      ];
      for (let i = 0; i < 18; i++) {
        const el = document.createElement("div");
        el.className = "code-float";
        el.style.left = Math.random() * 100 + "%";
        el.style.top = Math.random() * 100 + "%";
        el.style.animationDuration = 10 + Math.random() * 10 + "s";
        el.innerText = snippets[Math.floor(Math.random() * snippets.length)];
        bg.appendChild(el);
      }
    }
  </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Foundrly ‚Äî Build Your AI Startup</title>
  <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-purple: linear-gradient(to bottom right, #2d0059, #5e1aa2);
      --bg-gold: linear-gradient(to bottom right, #5f4200, #d4af37);
      --text-light: #ffffff;
      --text-dark: #1a1a1a;
      --accent-purple: #9b59b6;
      --accent-gold: #f1c40f;
      --metallic-purple: linear-gradient(145deg, #5e1aa2, #9b59b6);
      --metallic-gold: linear-gradient(145deg, #f1c40f, #d4af37);
    }
    body.theme-purple { background: var(--bg-purple); color: var(--text-light); }
    body.theme-gold { background: var(--bg-gold); color: var(--text-dark); }
    body {
      font-family: 'Fira Code', monospace;
      margin: 0;
      padding: 2rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      overflow: hidden;
      transition: background 0.5s ease, color 0.5s ease;
    }
    .typewriter-wrapper {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      pointer-events: none;
      z-index: 0;
    }
    .typewriter-chat {
      position: absolute;
      background: rgba(0, 0, 0, 0.6);
      color: #9b59b6;
      padding: 1rem;
      border-radius: 12px;
      font-family: 'Fira Code', monospace;
      font-size: 0.85rem;
      max-width: 320px;
      opacity: 0;
      animation: fadeInOut 6s ease-in-out forwards;
      white-space: pre-wrap;
    }
    body.theme-gold .typewriter-chat {
      background: rgba(255, 255, 255, 0.2);
      color: #f1c40f;
    }
    @keyframes fadeInOut {
      0% { opacity: 0; }
      10% { opacity: 1; }
      90% { opacity: 1; }
      100% { opacity: 0; }
    }
    .title {
      font-size: 3rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
      text-align: center;
      animation: fadeIn 1s ease;
      z-index: 2;
    }
    body.theme-purple .title {
      background: linear-gradient(to right, #a770ef, #cf8bf3, #fdb99b);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    body.theme-gold .title {
      background: linear-gradient(to right, #d4af37, #eacb84);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    .slogan {
      font-size: 1.1rem;
      font-weight: 500;
      margin-bottom: 1.5rem;
      animation: fadeInSlideUp 1.2s ease-in-out, glowPulse 1.5s ease-in-out infinite alternate;
      text-align: center;
      z-index: 2;
    }
    @keyframes fadeInSlideUp {
      0% { opacity: 0; transform: translateY(20px); }
      100% { opacity: 1; transform: translateY(0); }
    }
    @keyframes glowPulse {
      0% { text-shadow: 0 0 10px rgba(255, 255, 255, 0.7), 0 0 20px rgba(255, 255, 255, 0.5); }
      100% { text-shadow: 0 0 30px rgba(255, 255, 255, 1), 0 0 60px rgba(255, 255, 255, 1); }
    }
    .container {
      max-width: 640px;
      width: 100%;
      background: rgba(255,255,255,0.06);
      border-radius: 16px;
      padding: 2rem;
      box-shadow: 0 0 16px rgba(0,0,0,0.5);
      z-index: 1;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    textarea {
      width: 100%;
      height: 120px;
      font-size: 1rem;
      padding: 1rem;
      background: #1a1a1a;
      color: #f1c40f;
      border-radius: 10px;
      resize: none;
      transition: color 0.3s ease;
      font-family: 'Fira Code', monospace;
    }
    body.theme-gold textarea {
      background: #222;
      color: #9b59b6;
    }
    pre {
      background: #111;
      color: #00ffaa;
      padding: 1rem;
      border-radius: 8px;
      overflow-x: auto;
      white-space: pre-wrap;
      font-size: 0.95rem;
      font-family: 'Fira Code', monospace;
    }
    button {
      margin-top: 1rem;
      padding: 0.75rem 2rem;
      font-size: 1rem;
      font-weight: bold;
      font-family: 'Fira Code', monospace;
      background-image: var(--metallic-purple);
      color: #fff;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      box-shadow: 0 0 12px rgba(0, 0, 0, 0.3);
      transition: background 0.3s ease, transform 0.2s ease;
      display: block;
      margin-left: auto;
      margin-right: auto;
    }
    body.theme-gold button {
      background-image: var(--metallic-gold);
      color: #1a1a1a;
    }
    button:hover {
      transform: scale(1.05);
    }
    #loader {
      display: none;
      margin-top: 1rem;
      text-align: center;
    }
    #settingsBtn {
      position: fixed;
      bottom: 64px;
      right: 16px;
      padding: 0.5rem 1rem;
      border-radius: 6px;
      font-size: 1.2rem;
      background-color: rgba(0, 0, 0, 0.6);
      color: #fff;
      cursor: pointer;
      z-index: 2;
    }
    #settingsPanel {
      display: none;
      position: fixed;
      bottom: 110px;
      right: 16px;
      background: rgba(0, 0, 0, 0.7);
      padding: 1rem;
      border-radius: 10px;
      color: #fff;
      font-size: 0.9rem;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
    }
    #settingsPanel label {
      display: block;
      margin-bottom: 10px;
    }
    #settingsPanel input {
      margin-right: 10px;
    }
  </style>
</head>
<body class="theme-purple">
  <div class="typewriter-wrapper" id="typewriterWrapper"></div>
  <div class="title">Foundrly</div>
  <div class="slogan">Your Cofounder Doesn‚Äôt Have to Be Human.</div>
  <div class="container">
    <h2>Describe your AI business idea:</h2>
    <textarea id="ideaInput" placeholder="e.g. An AI that writes Instagram captions for barbers..."></textarea><br>
    <button onclick="submitIdea()">Build It</button>
    <div id="loader">‚è≥ Generating...</div>
    <div id="responseArea" style="margin-top: 2rem;"></div>
  </div>
  <button id="settingsBtn" onclick="toggleSettings()">‚öôÔ∏è</button>
  <div id="settingsPanel">
    <label>üåó Theme: <input type="checkbox" id="themeToggle" onclick="toggleTheme()" /></label>
    <label>üéûÔ∏è Background Animation: <input type="checkbox" id="bgAnimToggle" onclick="toggleBackgroundAnimation()" /></label>
    <label>üñãÔ∏è Typing Speed: <input type="checkbox" id="fastTypingToggle" onclick="toggleTypingSpeed()" /></label>
    <label>‚ú® Reduce Glow Mode: <input type="checkbox" id="glowToggle" onclick="toggleGlow()" /></label>
  </div>

  <script>
    const phrases = [
      "An AI that writes ad copy for local cafes.",
      "A tool that builds landing pages from voice notes.",
      "An assistant that summarizes client feedback.",
      "An AI that auto-generates slogans for fashion brands.",
      "A bot that responds to DMs for digital creators.",
      "An AI that repackages blog posts into carousels.",
      "A caption creator for streetwear drops.",
      "Turn review comments into testimonials.",
      "Generate DM templates for influencer collabs.",
      "From idea to MVP, instantly."
    ];

    let followUpQuestions = [];
    let typingSpeed = 'normal';

    function spawnChatBubble(text) {
      const bubble = document.createElement("div");
      bubble.className = "typewriter-chat";
      const leftSide = Math.random() < 0.5;
      const leftOffset = Math.random() * 20 + 5;
      const rightOffset = Math.random() * 20 + 5;
      if (leftSide) {
        bubble.style.left = `${leftOffset}%`;
      } else {
        bubble.style.left = `${80 + rightOffset}%`;
      }
      bubble.style.top = `${Math.random() * 90}%`;
      document.getElementById("typewriterWrapper").appendChild(bubble);
      let index = 0;
      const typingInterval = setInterval(() => {
        if (index < text.length) {
          bubble.textContent += text[index];
          index++;
        } else {
          clearInterval(typingInterval);
          bubble.textContent += ".";
          setTimeout(() => bubble.remove(), 1000);
        }
      }, typingSpeed === 'fast' ? 30 : 45);
    }

    async function submitIdea() {
      const idea = document.getElementById("ideaInput").value;
      const responseArea = document.getElementById("responseArea");
      const loader = document.getElementById("loader");
      loader.style.display = "block";
      responseArea.innerHTML = "";

      try {
        const refineRes = await fetch("https://foundrly-backend-1.onrender.com/api/refine-idea", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ idea })
        });

        const refineData = await refineRes.json();

        if (refineData.status === "clarify") {
          responseArea.innerHTML = "<h3>Let‚Äôs clarify a few things:</h3><ul>" +
            refineData.questions.map(q => `<li>${q}</li>`).join("") + "</ul>";
        } else if (refineData.status === "ready") {
          const genRes = await fetch("https://foundrly-backend-1.onrender.com/api/generate-code", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              idea,
              target_user: "creators",
              platform: "web app",
              features: ["text generation", "download"]
            })
          });

          const genData = await genRes.json();
          responseArea.innerHTML = ` 
            <h3>Tool Summary:</h3><pre>${genData.spec}</pre>
            <h3>Generated Code:</h3><pre>${genData.code}</pre>
            <h3>Setup Instructions:</h3><pre>${genData.instructions}</pre>
          `;
        } else {
          responseArea.innerHTML = "Unexpected response.";
        }
      } catch (err) {
        console.error(err);
        responseArea.innerHTML = "Something went wrong.";
      } finally {
        loader.style.display = "none";
      }
    }

    function toggleSettings() {
      const panel = document.getElementById("settingsPanel");
      panel.style.display = panel.style.display === "none" || panel.style.display === "" ? "block" : "none";
    }

    function toggleTheme() {
      document.body.classList.toggle("theme-purple");
      document.body.classList.toggle("theme-gold");
      localStorage.setItem("theme", document.body.classList.contains("theme-purple") ? "purple" : "gold");
    }

    function toggleBackgroundAnimation() {
      const wrapper = document.getElementById("typewriterWrapper");
      wrapper.style.display = wrapper.style.display === "none" ? "block" : "none";
      localStorage.setItem("bgAnim", wrapper.style.display === "none" ? "off" : "on");
    }

    function toggleTypingSpeed() {
      typingSpeed = typingSpeed === 'normal' ? 'fast' : 'normal';
      localStorage.setItem("typingSpeed", typingSpeed);
    }

    function toggleGlow() {
      const slogan = document.querySelector(".slogan");
      slogan.classList.toggle("no-glow");
      localStorage.setItem("glow", slogan.classList.contains("no-glow") ? "off" : "on");
    }

    window.onload = () => {
      // Load saved settings from localStorage
      if (localStorage.getItem("theme") === "gold") {
        toggleTheme();
      }
      if (localStorage.getItem("bgAnim") === "off") {
        toggleBackgroundAnimation();
      }
      if (localStorage.getItem("typingSpeed") === "fast") {
        toggleTypingSpeed();
      }
      if (localStorage.getItem("glow") === "off") {
        toggleGlow();
      }
    }
  </script>
</body>
</html>
